async function generate(){document.querySelector(".input").classList.remove("open"),document.querySelector("body").classList.remove("lock"),document.querySelector(".notification").classList.add("open"),document.querySelector(".notification").innerHTML="Generating charts...",await parse_input_data(),await calc_position(!1),await draw(!1),setTimeout(()=>{document.querySelector(".notification").classList.remove("open"),document.querySelector(".notification").innerHTML=""},100)}function parse_input_data(){name=document.getElementById("name").value,parse_date(document.getElementById("date").value),parse_time(document.getElementById("time").value),tz=document.getElementById("tz").value,lat=Number(document.getElementById("lat").value),lat=isNaN(lat)?0:lat,lon=Number(document.getElementById("lon").value),lon=isNaN(lon)?0:lon}function parse_date(a){date=0,date=new Date(a)}function parse_time(a){time=0,time=new Date;var t=a.replace(/\s+/g,"");t=t.match(/(\d{1,2})(:(\d\d))/),t[1]<10&&(t[1]=parseInt(t[1],10)),t[3]<10&&(t[3]=parseInt(t[3],10)),time.setHours(parseInt(t[1])+(parseInt(t[1])<12&&t[4]?12:0)),time.setMinutes(parseInt(t[3])||0),time.setSeconds(parseInt(0)),(parseInt(t[1])>=24||parseInt(t[3])>59||0==parseInt(t[1])&&0==parseInt(t[3]))&&(time.setHours(parseInt(0)),time.setMinutes(parseInt(1)),document.getElementById("time").value="00:01")}function parse_latitude(a){var t=a.replace(/\s+/g,"");-1!=t.indexOf("N")?(lattmp=t.split("N"),lat=dms2real(parseInt(lattmp[0]),parseInt(lattmp[1]),parseInt(0))):-1!=t.indexOf("S")&&(lattmp=t.split("S"),lat=dms2real(parseInt(lattmp[0]),parseInt(lattmp[1]),parseInt(0)),lat=-lat)}function parse_longitude(a){var t=a.replace(/\s+/g,"");-1!=t.indexOf("W")?(lontmp=t.split("W"),lon=dms2real(parseInt(lontmp[0]),parseInt(lontmp[1]),parseInt(0)),lon=-lon):-1!=t.indexOf("E")&&(lontmp=t.split("E"),lon=dms2real(parseInt(lontmp[0]),parseInt(lontmp[1]),parseInt(0)))}function myplanets(a,t,e,i,s,n,r,o,h,l,c,d,m,u){this.name=a,this.index=t,this.ra=e,this.ruler=i,this.r_index=s,this.aspect=n,this.day=r,this.happy_zodiac=o,this.happy_house=h,this.sad_zodiac=l,this.sad_house=c,this.good_friend=d,this.bad_friend=m,this.transitdeg=u,this.house="",this.zodiac="",this.degree="",this.dosha="",this.naksha="",this.retro="",this.range="",this.rasizn="",this.horadeg="",this.horazn="",this.drekkdeg="",this.drekkzn="",this.turydeg="",this.turyzn="",this.pancdeg="",this.panczn="",this.shashdeg="",this.shashzn="",this.shaptdeg="",this.shaptzn="",this.ashtdeg="",this.ashtzn="",this.navdeg="",this.navzn="",this.dashdeg="",this.dashzn="",this.ekaddeg="",this.ekadzn="",this.dwaddeg="",this.dwadzn="",this.getra=function(){return this.ra},this.getzodiac=function(){return this.zodiac},this.getdegree=function(){return this.degree},this.compute=function(a){this.ra=mod360(a?this.transitdeg:this.ra),this.horadeg=this.ra-15-60*Math.floor((this.ra-15)*(1/60))+90,this.horazn=calc_zodiac(this.horadeg),this.shashdeg=mod2pi(6*this.ra*RADS)*DEGS,this.shashzn=calc_zodiac(this.shashdeg),this.ashtdeg=mod2pi(8*this.ra*RADS)*DEGS,this.ashtzn=calc_zodiac(this.ashtdeg),this.navdeg=mod2pi(9*this.ra*RADS)*DEGS,this.navzn=calc_zodiac(this.navdeg);var t=12*(this.ra-30*Math.floor(this.ra*(1/30))),e=30*parseInt(this.ra/30);this.dwaddeg=mod2pi((e+t)*RADS)*DEGS,this.dwadzn=calc_zodiac(this.dwaddeg),this.ra>=0&&this.ra<=30?(this.zodiac="Aries",this.rasizn=1,this.range="000-030",this.degree=this.ra-0):this.ra>30&&this.ra<=60?(this.zodiac="Taurus",this.rasizn=2,this.range="030-060",this.degree=this.ra-30):this.ra>60&&this.ra<=90?(this.zodiac="Gemini",this.rasizn=3,this.range="060-090",this.degree=this.ra-60):this.ra>90&&this.ra<=120?(this.zodiac="Cancer",this.rasizn=4,this.range="090-120",this.degree=this.ra-90):this.ra>120&&this.ra<=150?(this.zodiac="Leo",this.rasizn=5,this.range="120-150",this.degree=this.ra-120):this.ra>150&&this.ra<=180?(this.zodiac="Virgo",this.rasizn=6,this.range="150-180",this.degree=this.ra-150):this.ra>180&&this.ra<=210?(this.zodiac="Libra",this.rasizn=7,this.range="180-210",this.degree=this.ra-180):this.ra>210&&this.ra<=240?(this.zodiac="Scorpio",this.rasizn=8,this.range="210-240",this.degree=this.ra-210):this.ra>240&&this.ra<=270?(this.zodiac="Sagittarius",this.rasizn=9,this.range="240-270",this.degree=this.ra-240):this.ra>270&&this.ra<=300?(this.zodiac="Capricorn",this.rasizn=10,this.range="270-300",this.degree=this.ra-270):this.ra>300&&this.ra<=330?(this.zodiac="Aquarius",this.rasizn=11,this.range="300-330",this.degree=this.ra-300):this.ra>330&&this.ra<=360&&(this.zodiac="Pisces",this.rasizn=12,this.range="330-360",this.degree=this.ra-330),this.compute_division_zodiac(),this.compute_division_nakshatra(),this.compute_division_houses()},this.compute_division_zodiac=function(){for(var a=calc_ayanamsa(!1),t=calc_ascendant(time.getHours(),time.getMinutes(),!1)-a,e=1,i=0;i<MAXZOD;i++)calc_zodiac(t)+i>12?(myrashis[i]=e,e++):myrashis[i]=calc_zodiac(t)+i;e=1;var s=t-15-60*Math.floor(1/60*(t-15))+90;for(i=0;i<MAXZOD;i++)calc_zodiac(s)+i>12?(myhoraz[i]=e,e++):myhoraz[i]=calc_zodiac(s)+i;for(e=1,s=mod2pi(6*t*RADS)*DEGS,i=0;i<MAXZOD;i++)calc_zodiac(s)+i>12?(mysashthamshaz[i]=e,e++):mysashthamshaz[i]=calc_zodiac(s)+i;for(e=1,s=mod2pi(8*t*RADS)*DEGS,i=0;i<MAXZOD;i++)calc_zodiac(s)+i>12?(myashthamsaz[i]=e,e++):myashthamsaz[i]=calc_zodiac(s)+i;e=1,s=0;s=mod2pi(9*t*RADS)*DEGS;for(i=0;i<MAXZOD;i++)calc_zodiac(calc_ayanamsa(s))+i>12?(mynavamsaz[i]=e,e++):mynavamsaz[i]=calc_zodiac(calc_ayanamsa(s))+i;e=1,s=0;var n=12*(t-30*Math.floor(t*(1/30))),r=30*parseInt(t/30);s=mod2pi((r+n)*RADS)*DEGS;for(i=0;i<MAXZOD;i++)calc_zodiac(s)+i>12?(mydwadashamsaz[i]=e,e++):mydwadashamsaz[i]=calc_zodiac(s)+i},this.compute_division_nakshatra=function(){for(var a=0;a<=9;a++)mynaksha[a]=calc_nakshatra(mygrahas[a].getra(),1),mynakshal[a]=calc_nakshatra(mygrahas[a].getra(),2),mynakshap[a]=calc_nakshatra(mygrahas[a].getra(),3)},this.compute_division_houses=function(){for(var a=0;a<=9;a++)planets[a]=mygrahas[a].rasizn;calc_houses(myrashis,mybhavas,mygrahas);for(a=0;a<=9;a++)planets[a]=mygrahas[a].horazn;calc_houses(myhoraz,myhorah,mygrahas);for(a=0;a<=9;a++)planets[a]=mygrahas[a].shashzn;calc_houses(mysashthamshaz,mysashthamshah,mygrahas);for(a=0;a<=9;a++)planets[a]=mygrahas[a].ashtzn;calc_houses(myashthamsaz,myashthamsah,mygrahas);for(a=0;a<=9;a++)planets[a]=mygrahas[a].navzn;calc_houses(mynavamsaz,mynavamsah,mygrahas);for(a=0;a<=9;a++)planets[a]=mygrahas[a].dwadzn;calc_houses(mydwadashamsaz,mydwadashamsah,mygrahas)}}function calc_zodiac(a){var t,e=mod360(a);return e>=0&&e<=30?t=Aries:e>30&&e<=60?t=Taurus:e>60&&e<=90?t=Gemini:e>90&&e<=120?t=Cancer:e>120&&e<=150?t=Leo:e>150&&e<=180?t=Virgo:e>180&&e<=210?t=Libra:e>210&&e<=240?t=Scorpio:e>240&&e<=270?t=Sagittarius:e>270&&e<=300?t=Capricorn:e>300&&e<=330?t=Aquarius:e>330&&e<=360&&(t=Pisces),t}function calc_houses(a,t,e){var i,s;for(t[1]="",t[2]="",t[3]="",t[4]="",t[5]="",t[6]="",t[7]="",t[8]="",t[9]="",t[10]="",t[11]="",t[12]="",i=0;i<=11;i++)for(s=0;s<=9;s++)s>9&&(s=0),a[i]==planets[s]&&0==i?t[1]+=e[s].name+" ":a[i]==planets[s]&&1==i?t[2]+=e[s].name+" ":a[i]==planets[s]&&2==i?t[3]+=e[s].name+" ":a[i]==planets[s]&&3==i?t[4]+=e[s].name+" ":a[i]==planets[s]&&4==i?t[5]+=e[s].name+" ":a[i]==planets[s]&&5==i?t[6]+=e[s].name+" ":a[i]==planets[s]&&6==i?t[7]+=e[s].name+" ":a[i]==planets[s]&&7==i?t[8]+=e[s].name+" ":a[i]==planets[s]&&8==i?t[9]+=e[s].name+" ":a[i]==planets[s]&&9==i?t[10]+=e[s].name+" ":a[i]==planets[s]&&10==i?t[11]+=e[s].name+" ":a[i]==planets[s]&&11==i&&(t[12]+=e[s].name+" ")}function calc_nakshatra(a,t){var e,i,s=0,n=0;if(a<0&&(a+=360),a>=0&&a<=13.3333?(e="Ashvini",i="Ke",s=a-0,n=0):a>13.3333&&a<=26.6667?(e="Bharani",i="Ve",s=a-13.3333,n=13.3333):a>26.6667&&a<=40?(e="Krittika",i="Su",s=a-26.6667,n=26.6667):a>40&&a<=53.3333?(e="Rohini",i="Mo",s=a-40,n=40):a>53.3333&&a<=66.6667?(e="Mrigashir",i="Ma",s=a-53.3333,n=53.3333):a>66.6667&&a<=80?(e="Ardra",i="Ra",s=a-66.6667,n=66.6667):a>80&&a<=93.3333?(e="Punarvasu",i="Ju",s=a-80,n=80):a>93.3333&&a<=106.6667?(e="Pushya",i="Sa",s=a-93.3333,n=93.3333):a>106.6667&&a<=120?(e="Ashlesha",i="Me",s=a-106.6667,n=106.6667):a>120&&a<=133.3333?(e="Magha",i="Ke",s=a-120,n=120):a>133.3333&&a<=146.6667?(e="P.Phalg",i="Ve",s=a-133.3333,n=133.3333):a>146.6667&&a<=160?(e="U.Phalg",i="Su",s=a-146.6667,n=146.6667):a>160&&a<=173.3333?(e="Hasta",i="Mo",s=a-160,n=160):a>173.3333&&a<=186.6667?(e="Chitra",i="Ma",s=a-173.3333,n=173.3333):a>186.6667&&a<=200?(e="Svati",i="Ra",s=a-186.6667,n=186.6667):a>200&&a<=213.3333?(e="Vishakha",i="Ju",s=a-200,n=200):a>213.3333&&a<=226.6667?(e="Anuradha",i="Sa",s=a-213.3333,n=213.3333):a>226.6667&&a<=240?(e="Jyeshtha",i="Me",s=a-226.6667,n=226.6667):a>240&&a<=253.3333?(e="Mula",i="Ke",s=a-240,n=240):a>253.3333&&a<=266.6667?(e="P.Shadha",i="Ve",s=a-253.3333,n=253.3333):a>266.6667&&a<=280?(e="U.Shadha",i="Su",s=a-266.6667,n=266.6667):a>280&&a<=293.3333?(e="Sravana",i="Mo",s=a-280,n=280):a>293.3333&&a<=306.6667?(e="Dhanista",i="Ma",s=a-293.3333,n=293.3333):a>306.6667&&a<=320?(e="Shatabhi",i="Ra",s=a-306.6667,n=306.6667):a>320&&a<=333.3333?(e="P.Bhadra",i="Ju",s=a-320,n=320):a>333.3333&&a<=346.6667?(e="U.Bhadra",i="Sa",s=a-333.3333,n=333.3333):a>346.6667&&a<=360&&(e="Revati",i="Me",s=a-346.6667,n=346.6667),1==t)return e;if(2==t)return i;if(3==t){if(s>=0&&s<=3.333334)return 1;if(s>3.333334&&s<=6.666667)return 2;if(s>6.666667&&s<=9.999999)return 3;if(s>9.999999&&s<=13.4)return 4}else if(4==t)return n}function calc_planets_position(){var a=new Date;dn=calc_day_number(time.getHours(),time.getMinutes(),!1);var t=calc_julian_date(time.getHours(),time.getMinutes(),tz,!1),e=calc_julian_date(a.getHours(),a.getMinutes(),tz,!0),i=calc_ayanamsa(!1),s=calc_ayanamsa(!0),n=calc_ascendant(time.getHours(),time.getMinutes(),!1)-i,r=calc_ascendant(a.getHours(),a.getMinutes(),!0)-s;mygrahas[0]=new myplanets("As",AS,n,"","","","","","","","","","",r),mygrahas[1]=new myplanets("Su",SU,calc_vsop87(1,t)-i,"Leo",Leo,"7th","Sunday","Le,Ar","1,5,9,10","Li","4,6,7,8,12","Mo,Ma,Ju","Sa,Ve",calc_vsop87(1,e)-s),mygrahas[2]=new myplanets("Mo",MO,calc_moon_positionIII(!1)-i,"Cancer",Cancer,"7th","Monday","Ca,Ta","4,7,9,11,12","Sc,Cp","2,3,6,8","Su,Me"," - ",calc_moon_positionIII(!0)-s),mygrahas[3]=new myplanets("Ma",MA,calc_vsop87(3,t)-i,"Aries",Aries,"4,7,8th","Tuesday","Ar,Sc,Cp","1,3,5,8,10,11","Ca,Li,Pi","2,4,6,12","Su,Mo,Ju","Me",calc_vsop87(3,e)-s),mygrahas[4]=new myplanets("Me",ME,calc_vsop87(4,t)-i,"Virgo",Virgo,"7th","Wednesday","Vi,Ge","1,3,5,6,7,10,11","Sa,Pi","2,4,8,9,12","Ve,Su","Mo",calc_vsop87(4,e)-s),mygrahas[5]=new myplanets("Ju",JU,calc_vsop87(5,t)-i,"Sagittarius",Sagittarius,"5,7,9th","Thursday","Ca","1,4,5,7,9,10,2,11","Cp","2,11","Su,Mo,Ma","Ve,Me",calc_vsop87(5,e)-s),mygrahas[6]=new myplanets("Ve",VE,calc_vsop87(6,t)-i,"Libra",Libra,"7th","Friday","Li,Ta,Pi","1,2,4,5,7.9.11,12","Sc,Vi","3,6,8,10","Sa,Me","Su,Mo",calc_vsop87(6,e)-s),mygrahas[7]=new myplanets("Sa",SA,calc_vsop87(7,t)-i,"Aquarius",Aquarius,"3,7,10th","Saturday","Li,Cp,Aq","3,6,7,10,11","Ar,Ca","4,5,8,9,12","Me,Ve","Su,Mo,Ma",calc_vsop87(7,e)-s),mygrahas[8]=new myplanets("Ra",RA,calc_moon_acending_node(!1),"","","5,7,9th","","Ta,Ge,Vi,Li","1,2,3,5,10,11","Sg,Ar,Le,Pi","4,6,7,8,9,12"," - "," - ",calc_moon_acending_node(!0)),mygrahas[9]=new myplanets("Ke",KE,mod360(calc_moon_acending_node(!1)+180),"","","5,7,9th","","Sc,Pi,Sg,Ar","4,6,8,9,12","Ta,Ge,Vi,Li","1,2,3,5,7,10,11"," - "," - ",calc_moon_acending_node(!0)+180)}function calc_position(a){calc_planets_position();for(var t=0;t<=9;t++)mygrahas[t].compute(a)}function elements(){a=parseFloat("0"),e=parseFloat("0"),i=parseFloat("0"),O=parseFloat("0"),w=parseFloat("0"),L=parseFloat("0")}function calc_day_number(a,t,e){var i,s,n,r=new Date;if(e?(i=r.getFullYear(),s=r.getMonth()+1,n=r.getDate()):(i=date.getFullYear(),s=date.getMonth()+1,n=date.getDate()),s<3&&(i-=1,s+=12),1e4*i+100*s+n>15821004)var o=Math.floor(.01*i),h=2-o+Math.floor(.25*o);else o=Math.floor(.01*i),h=0*(2-o+Math.floor(.25*o));var l=Math.floor(365.25*i),c=Math.floor(30.6001*(s+1));return h+l+c-730550.5+n+(a-tz+t/60)/24}function calc_julian_date(a,t,e,i){var s,n,r,o=new Date;i?(s=o.getFullYear(),n=o.getMonth()+1,r=o.getDate()):(s=date.getFullYear(),n=date.getMonth()+1,r=date.getDate());var h,l=s,c=n;n>2?(l=s,c++):(l--,c+=13);var d=Math.floor(365.25*l)+Math.floor(30.6001*c)+r+1720995;if(r+31*(n+12*s)>=588829){var m=Math.floor(.01*l);d+=2-m+Math.floor(.25*m)}h=(a-e)/24-.5,h<0&&(h+=1,--d);var u=h+(t+dT(i)/60)/60/24,M=Math.floor(1e7*(d+u));return 1e7*(d+u)-M>.5?++M:M*=1,1e-7*M}function calc_day_of_the_week(a){var t,e=calc_julian_date(time.getHours(),time.getMinutes(),0,a),i=(Math.floor(e+.5)+1)%7;switch(i){case 0:t="Sunday";break;case 1:t="Monday";break;case 2:t="Tuesday";break;case 3:t="Wednesday";break;case 4:t="Thursday";break;case 5:t="Friday";break;case 6:t="Saturday";break;default:t="NaN"}return t}function calc_sideral_time(a,t,e){"W"==londir&&(lon=-lon);var i=calc_day_number(a,t,e)/36525,s=36525*i,n=mod360(280.46061837+360.98564736629*s+387933e-9*i*i-i*i*i/3871e4+lon);return n}function calc_ra(a){var t=dn/36525,e=new elements;mean_elements(e,a);var i=e.a,s=e.e,n=e.i,r=e.O,o=e.w,h=e.L,l=new elements;mean_elements(l,0);var c=l.a,d=l.e,m=(l.i,l.O,l.w),u=l.L,M=mod2pi(u-m),f=true_anomaly(M,d),g=c*(1-d*d)/(1+d*Math.cos(f)),S=g*Math.cos(f+m),p=g*Math.sin(f+m),_=0,y=mod2pi(h-o),v=true_anomaly(y,e.e),D=i*(1-s*s)/(1+s*Math.cos(v)),A=D*(Math.cos(r)*Math.cos(v+o-r)-Math.sin(r)*Math.sin(v+o-r)*Math.cos(n)),R=D*(Math.sin(r)*Math.cos(v+o-r)+Math.cos(r)*Math.sin(v+o-r)*Math.cos(n)),w=D*(Math.sin(v+o-r)*Math.sin(n));0==a&&(A=0,R=0,w=0);var z=A-S,x=R-p,T=w-_,b=23.4392907437*t*RADS,k=z,I=x*Math.cos(b)-T*Math.sin(b);Math.sin(b),Math.cos(b);return ra=mod2pi(Math.atan2(I,k))*DEGS,ra}function true_anomaly(a,t){var e,i,s=a+t*Math.sin(a)*(1+t*Math.cos(a));do{i=s,s=i-(i-t*Math.sin(i)-a)/(1-t*Math.cos(i))}while(Math.abs(s-i)>EPS);return e=2*Math.atan(Math.sqrt((1+t)/(1-t))*Math.tan(.5*s)),e<0&&(e+=2*Math.PI),e}function mean_elements(a,t){var e=dn/36525;switch(t){case 0:a.a=1.00000011-5e-8*e,a.e=.01671022-3804e-8*e,a.i=(5e-5-46.94*e/3600)*RADS,a.O=(-11.26064-18228.25*e/3600)*RADS,a.w=(102.94719+1198.28*e/3600)*RADS,a.L=mod2pi((100.46435+129597740.63*e/3600)*RADS);break;case 1:a.a=1.52366231-7221e-8*e,a.e=.09341233+11902e-8*e,a.i=(1.85061-25.47*e/3600)*RADS,a.O=(49.57854-1020.19*e/3600)*RADS,a.w=(336.04084+1560.78*e/3600)*RADS,a.L=mod2pi((355.45332+68905103.78*e/3600)*RADS);break;case 2:a.a=.38709893+6.6e-7*e,a.e=.20563069+2527e-8*e,a.i=(7.00487-23.51*e/3600)*RADS,a.O=(48.33167-446.3*e/3600)*RADS,a.w=(77.45645+573.57*e/3600)*RADS,a.L=mod2pi((252.25084+538101628.29*e/3600)*RADS);break;case 3:a.a=5.20336301+60737e-8*e,a.e=.04839266-1288e-7*e,a.i=(1.3053-4.15*e/3600)*RADS,a.O=(100.55615+1217.17*e/3600)*RADS,a.w=(14.75385+839.93*e/3600)*RADS,a.L=mod2pi((34.40438+10925078.35*e/3600)*RADS);break;case 4:a.a=.72333199+9.2e-7*e,a.e=.00677323-4938e-8*e,a.i=(3.39471-2.86*e/3600)*RADS,a.O=(76.68069-996.89*e/3600)*RADS,a.w=(131.53298-108.8*e/3600)*RADS,a.L=mod2pi((181.97973+210664136.06*e/3600)*RADS);break;case 5:a.a=9.53707032-.0030153*e,a.e=.0541506-36762e-8*e,a.i=(2.48446+6.11*e/3600)*RADS,a.O=(113.71504-1591.05*e/3600)*RADS,a.w=(92.43194-1948.89*e/3600)*RADS,a.L=mod2pi((49.94432+4401052.95*e/3600)*RADS);break;default:window.alert(" Have you discovered a new planet :) ")}}function calc_vsop87(a,t){var e,i,s,n,r,o,h,l,c,d=0,m=1,u=2,M=(t-2451545)/365250;switch(calc_earth(M),n=earth[d],r=earth[m],o=earth[u],a){case 1:e=-earth[d],i=-earth[m],s=-earth[u];break;case 2:break;case 3:calc_mars(M),e=mars[d],i=mars[m],s=mars[u];break;case 4:calc_mercury(M),e=mercury[d],i=mercury[m],s=mercury[u];break;case 5:calc_jupiter(M),e=jupiter[d],i=jupiter[m],s=jupiter[u];break;case 6:calc_venus(M),e=venus[d],i=venus[m],s=venus[u];break;case 7:calc_shani(M),e=shani[d],i=shani[m],s=shani[u];break;default:window.alert(" error ;) ")}return a==SU&&(n=0,r=0,o=0),h=e-n,l=i-r,s-o,c=Math.atan2(l,h)*DEGS,c}function calc_moon_positionI(){var a=date.getFullYear(),t=date.getMonth()+1,e=date.getDate(),i=a,s=t,n=time.getHours()-tz+time.getMinutes()/60;if(t<3&&(i-=1,s+=12),1e4*a+100*t+e>15821004)var r=Math.floor(.01*i),o=2-r+Math.floor(.25*r);else r=Math.floor(.01*i),o=0*(2-r+Math.floor(.25*r));var h=Math.floor(365.25*i)+Math.floor(30.6001*(s+1))-730550.4+e+n/24+o,l=h/36525,c=mod360(280.466+36000.8*l),d=mod360(357.529+35999*l-1536e-7*l*l+l*l*l/2449e4),m=Math.sin(d*RADS)*(1.915-.004817*l-14e-6*l*l)+(.01999-101e-6*l)*Math.sin(2*d*RADS)+29e-5*Math.sin(3*d*RADS),u=d+m,M=.01671-4204e-8*l-1.236e-7*l*l,f=(Math.cos(u*RADS),c+m),g=mod360(125.04-1934.1*l),S=(c=f-.00569-.00478*Math.sin(g*RADS),(84381.448-46.815*l)/3600),p=Math.sin(f*RADS)*Math.cos(S*RADS),_=0,y=Math.cos(f*RADS);RAs=mod2pi(Math.atan2(p-_,y))*DEGS;var v=mod360(93.2721+483202*l-.003403*l*l-l*l*l/3526e3),D=mod360(218.316+481268*l),A=mod360(134.963+477199*l+.008997*l*l+l*l*l/69700),R=mod360(297.85+445267*l-.00163*l*l+l*l*l/545900),w=(Math.cos(A*RADS),Math.cos((2*R-A)*RADS),Math.cos(2*R),5.128*Math.sin(v*RADS)+.2806*Math.sin((A+v)*RADS)+.2777*Math.sin((A-v)*RADS)+.1732*Math.sin((2*R-v)*RADS)),z=6.289*Math.sin(A*RADS)+1.274*Math.sin((2*R-A)*RADS)+.6583*Math.sin(2*R*RADS)+.2136*Math.sin(2*A*RADS)-.1851*Math.sin(d*RADS)-.1143*Math.sin(2*v*RADS)+.0588*Math.sin((2*R-2*A)*RADS)+.0572*Math.sin((2*R-d-A)*RADS)+.0533*Math.sin((2*R+A)*RADS),x=z+D,T=Math.sin(x*RADS)*Math.cos(S*RADS),b=Math.tan(w*RADS)*Math.sin(S*RADS),k=Math.cos(x*RADS);return RAm=mod2pi(Math.atan2(T-b,k))*DEGS,RAm}function calc_moon_positionII(){var a,t=calc_julian_date(time.getHours(),time.getMinutes(),tz,!1)-2451543.5,e=mod2pi((125.1228-.0529538083*t)*RADS),i=5.1454*RADS,s=mod2pi((318.0634+.1643573223*t)*RADS),n=60.2666,r=.0549,o=mod2pi((115.3654+13.0649929509*t)*RADS),h=23.4393-3.563e-7*t,l=o+r*Math.sin(o)*(1+r*Math.cos(o));do{a=l,l=a-(a-r*Math.sin(a)-o)/(1-r*Math.cos(a))}while(Math.abs(l-a)>EPS);var c,d,m,u=n*(Math.cos(l)-r),M=n*(Math.sqrt(1-r*r)*Math.sin(l)),f=mod2pi(Math.atan2(M,u)),g=Math.sqrt(u*u+M*M),S=g*(Math.cos(e)*Math.cos(f+s)-Math.sin(e)*Math.sin(f+s)*Math.cos(i)),p=g*(Math.sin(e)*Math.cos(f+s)+Math.cos(e)*Math.sin(f+s)*Math.cos(i)),_=g*(Math.sin(f+s)*Math.sin(i)),y=S,v=p*Math.cos(h)-_*Math.sin(h),D=p*Math.sin(h)+_*Math.cos(h),A=mod2pi(Math.atan2(p,S)),R=Math.atan2(_,Math.sqrt(S*S+p*p)),w=(Math.sqrt(y*y+v*v+D*D),mod2pi((282.9404+470935e-10*t)*RADS)),z=mod2pi((356.047+.9856002585*t)*RADS),x=mod2pi((z*DEGS+w*DEGS)*RADS),T=o*DEGS,b=mod2pi(e+s+o)*DEGS,k=b-x*DEGS,I=b-e*DEGS;c=-1.274*Math.sin(T*RADS-2*k*RADS)+.658*Math.sin(2*k*RADS)-.186*Math.sin(z)-.059*Math.sin(2*T*RADS-2*k*RADS)-.057*Math.sin(T*RADS-2*k*RADS+z)+.053*Math.sin(T*RADS+2*k*RADS)+.046*Math.sin(2*k*RADS-z)+.041*Math.sin(T*RADS-z)-.035*Math.sin(k*RADS)-.031*Math.sin(T*RADS+z)-.015*Math.sin(2*I*RADS-2*k*RADS)+.011*Math.sin(T*RADS-4*k*RADS),d=-.173*Math.sin(I*RADS-2*k*RADS)-.055*Math.sin(T*RADS-I*RADS-2*k*RADS)-.046*Math.sin(T*RADS+I*RADS-2*k*RADS)+.033*Math.sin(I*RADS+2*k*RADS)+.017*Math.sin(2*T*RADS+I*RADS),m=-.58*Math.cos(T*RADS-2*k*RADS)-.46*Math.cos(2*k*RADS),A=A*DEGS+c,R=R*DEGS+d,g+=m;var E=g*Math.cos(A*RADS)*Math.cos(R*RADS),L=g*Math.sin(A*RADS)*Math.cos(R*RADS);Math.sin(R*RADS);y=E,v=L*Math.cos(h*RADS)-0*Math.sin(h),D=L*Math.sin(h*RADS)+0*Math.cos(h);var P=mod2pi(Math.atan2(v,y))*DEGS;return P}function calc_moon_positionIII(a){for(var t=[60],e=0;e<60;e++)t[e]=[4];t=[[0,0,1,0],[2,0,-1,0],[2,0,0,0],[0,0,2,0],[0,1,0,0],[0,0,0,2],[2,0,-2,0],[2,-1,-1,0],[2,0,1,0],[2,-1,0,0],[0,1,-1,0],[1,0,0,0],[0,1,1,0],[2,0,0,-2],[0,0,1,2],[0,0,1,-2],[4,0,-1,0],[0,0,3,0],[4,0,-2,0],[2,1,-1,0],[2,1,0,0],[1,0,-1,0],[1,1,0,0],[2,-1,1,0],[2,0,2,0],[4,0,0,0],[2,0,-3,0],[0,1,-2,0],[2,0,-1,2],[2,-1,-2,0],[1,0,1,0],[2,-2,0,0],[0,1,2,0],[0,2,0,0],[2,-2,-1,0],[2,0,1,-2],[2,0,0,2],[4,-1,-1,0],[0,0,2,2],[3,0,-1,0],[2,1,1,0],[4,-1,-2,0],[0,2,-1,0],[2,2,-1,0],[2,1,-2,0],[2,-1,0,-2],[4,0,1,0],[0,0,4,0],[4,-1,0,0],[1,0,-2,0],[2,1,0,-2],[0,0,2,-2],[1,1,1,0],[3,0,-2,0],[4,0,-3,0],[2,-1,2,0],[0,2,1,0],[1,1,-1,0],[2,0,3,0],[2,0,-1,-2]];var i=[60];for(e=0;e<60;e++)i[e]=[4];i=[[0,0,0,1],[0,0,1,1],[0,0,1,-1],[2,0,0,-1],[2,0,-1,1],[2,0,-1,-1],[2,0,0,1],[0,0,2,1],[2,0,1,-1],[0,0,2,-1],[2,-1,0,-1],[2,0,-2,-1],[2,0,1,1],[2,1,0,-1],[2,-1,-1,1],[2,-1,0,1],[2,-1,-1,-1],[0,1,-1,-1],[4,0,-1,-1],[0,1,0,1],[0,0,0,3],[0,1,-1,1],[1,0,0,1],[0,1,1,1],[0,1,1,-1],[0,1,0,-1],[1,0,0,-1],[0,0,3,1],[4,0,0,-1],[4,0,-1,1],[0,0,1,-3],[4,0,-2,1],[2,0,0,-3],[2,0,2,-1],[2,-1,1,-1],[2,0,-2,1],[0,0,3,-1],[2,0,2,1],[2,0,-3,-1],[2,1,-1,1],[2,1,0,1],[4,0,0,1],[2,-1,1,1],[2,-2,0,-1],[0,0,1,3],[2,1,1,-1],[1,1,0,-1],[1,1,0,1],[0,1,-2,-1],[2,1,-1,-1],[1,0,1,1],[2,-1,-2,-1],[0,1,2,1],[4,0,-2,-1],[4,-1,-1,-1],[1,0,1,-1],[4,0,1,-1],[1,0,-1,-1],[4,-1,0,-1],[2,-2,0,1]];var s,n,r,o,h,c,d,m,u,M,f=[6288774,1274027,658314,213618,-185116,-114332,58793,57066,53322,45758,-40923,-34720,-30383,15327,-12528,10980,10675,10034,8548,-7888,-6766,-5163,4987,4036,3994,3861,3665,-2689,-2602,2390,-2348,2236,-2120,-2069,2048,-1773,-1595,1215,-1110,-892,-810,759,-713,-700,691,596,549,537,520,-487,-399,-381,351,-340,330,327,-323,299,294,0],g=[-20905355,-3699111,-2955968,-569925,48888,-3149,246158,-152138,-170733,-204586,-129620,108743,104755,10321,0,79661,-34782,-23210,-21636,24208,30824,-8379,-16675,-12831,-10445,-11650,14403,-7003,0,10056,6322,-9884,5751,0,-4950,4130,0,-3958,0,3258,2616,-1897,-2117,2354,0,0,-1423,-1117,-1571,-1739,0,-4421,0,0,0,0,1165,0,0,8752],S=[5128122,280602,277693,173237,55413,46271,32573,17198,9266,8822,8216,4324,4200,-3359,2463,2211,2065,-1870,1828,-1794,-1749,-1565,-1491,-1475,-1410,-1344,-1335,1107,1021,833,777,671,607,596,491,-451,439,422,421,-366,-351,331,315,302,-283,-229,223,223,-220,-220,-185,181,-177,176,166,-164,132,-119,115,107],p=[],_=0,y=new Date;M=a?(calc_julian_date(y.getHours(),y.getMinutes(),tz,a)-2451545)/36525:(calc_julian_date(time.getHours(),time.getMinutes(),tz,a)-2451545)/36525;var v=M*M*M*M,D=M*M*M,A=M*M;for(s=mod2pi((218.3164591+481267.88134236*M-.0013268*A+D/538841-v/65194e3)*RADS),n=mod2pi((297.8502042+445267.1115168*M-.00163*A+D/545868-v/113065e3)*RADS),r=mod2pi((357.5291092+35999.0502909*M-1536e-7*A+D/2449e4)*RADS),o=mod2pi((134.9634114+477198.8676313*M+.008997*A+D/69699-v/14712e3)*RADS),h=mod2pi((93.2720993+483202.0175273*M-.0034029*A-D/3526e3+v/86331e4)*RADS),c=mod2pi((119.75+131.849*M)*RADS),d=mod2pi((53.09+479264.29*M)*RADS),m=mod2pi((313.45+481266.484*M)*RADS),p[0]=1,p[1]=1-.002516*M-74e-7*A,p[2]=p[1]*p[1],e=0;e<60;e++)u=t[e][0]*n+t[e][1]*r+t[e][2]*o+t[e][3]*h,_+=f[e]*Math.sin(u)*p[Math.abs(t[e][1])],0!=g[e]&&g[e]*Math.cos(u)*p[Math.abs(t[e][1])],u=i[e][0]*n+i[e][1]*r+i[e][2]*o+i[e][3]*h,S[e]*Math.sin(u)*p[Math.abs(i[e][1])];return _+=3958*Math.sin(c)+1962*Math.sin(s-h)+318*Math.sin(d),-2235*Math.sin(s)+382*Math.sin(m)+175*Math.sin(c-h)+175*Math.sin(c+h)+127*Math.sin(s-o)-115*Math.sin(s+o),l=mod2pi((s*DEGS+_/1e6)*RADS)*DEGS,l}function _ecl(a){var t=[-4680.93/3600,-1.55/3600,1999.25/3600,-51.38/3600,-249.67/3600,-39.05/3600,7.12/3600,27.87/3600,5.79/3600,2.45/3600],e=23.43929111111111,i=0,s=0,n=a/36525;if(s=i=(a-2415020)/(100*n),Math.abs(i)<1)for(var r=0;r<10;r++)e+=t[r]*s,s*=i;return e}function dT(a){var t,e=new Date;t=a?e.getFullYear()+(e.getMonth()+1-.5)/12:date.getFullYear()+(date.getMonth()+1-.5)/12;var i=-12932e-9*Math.pow(t-1955,2),s=0,n=0,r=0;return t2=r*r,t3=r*r*r,t4=r*r*r*r,t5=t4*r,t6=t5*r,t7=t6*r,t<=-500?(n=(t-1820)/100,s=32*n*n-20+i):t<-500&&t<=500?(n=t/100,s=10583.6-1014.41*n+33.78311*n*n-5.952053*n*n*n-.1798452*n*n*n*n+.022174192*n*n*n*n*n+.0090316521*n*n*n*n*n*n+i):t>500&&t<=1600?(n=(t-1e3)/100,s=1574.2-556.01*n+71.23472*n*n+.319781*n*n*n-.8503463*n*n*n*n-.005050998*n*n*n*n*n+.0083572073*n*n*n*n*n*n+i):t>1600&&t<=1700?(r=t-1600,s=120-.9808*r-.01532*t2+t3/7129+i):t>1700&&t<=1800?(r=t-1800,s=13.72-.332447*r+.0068612*t2+.0041116*t3-37436e-8*t4+121272e-10*t5-1.699e-7*t6+8.75e-10*t7+i):t>1860&&t<=1900?(r=t-1860,s=7.62+.5737*r-.251754*t2+.01680668*t3-.0004473624*t4+t5/233174+i):t>1900&&t<=1920?(r=t-1920,s=21.2+.84493*r-.0761*t2+.0020936*t3+i):t>1941&&t<=1961?(r=t-1950,s=29.07+.407*r-t2/233+t3/2547):t>1961&&t<=1986?(r=t-1975,s=45.45+1.067*r-t2/260-t3/718):t>1986&&t<=2005?(r=t-2e3,s=3.86+.3345*r-.060374*t2+.0017275*t3+651814e-9*t4+2373599e-11*t5):t>2005&&t<=2050?(r=t-2e3,s=62.92+.32217*r+.005589*t2+i):t>2050&&t<=2150?s=(t-1820)/100*32*((t-1820)/100)-20-.5628*(2150-t)+i:t>2150&&(n=(t-1820)/100,s=32*n*n-20+i),s}function dms2real(a,t,e){var i;return i=a<0?a-t/60-e/3600:a+t/60+e/3600,i}function hms2deg(a,t,e){return 15*a+t/4+e/240}function dec2hms(a){if(isNaN(a))return"00:00:00";var t=a,e=t;t=t;var i=Math.floor(e);e-=i,e*=60;Math.floor(e);var s=Math.floor(t);t-=s,t*=60;var n=Math.floor(t);t-=n,t*=60;var r=Math.floor(t),o=(s<10?"0":"")+s;return o+=(n<10?":0":":")+n,o+=(r<10?":0":":")+r,o}function deg2hms(a){if(isNaN(a))return"00:00:00";var t=a,e=t;t/=15;var i=Math.floor(e);e-=i,e*=60;Math.floor(e);var s=Math.floor(t);t-=s,t*=60;var n=Math.floor(t);t-=n,t*=60;var r=Math.floor(t),o=(s<10?"0":"")+s;return o+=(n<10?":0":":")+n,o+=(r<10?":0":":")+r,o}function dec2date(a){if(isNaN(a))return"00/00/0000";var t=a,e=Math.round(t),i=parseInt(date.getFullYear()-e);t-=e;var s=Math.round(12*t),n=parseInt(12-s+(date.getMonth()+1)-12);(isNaN(n)||n<0)&&(n=1);var r=Math.round(12*t),o=Math.abs(r-12*t),h=Math.round(30*o),l=Math.abs(30-date.getDate()-h),c=(l<10?"0":"")+l;return c+=(n<10?"/0":"/")+n,c+=(i<1e3?"/0":"/")+i,c}function _abs(a){var t;return t=a>=0?Math.floor(a):Math.ceil(a),t}function mod24(a){return(a+24)%24}function mod2pi(a){var t=a/(2*Math.PI),e=2*Math.PI*(t-_abs(t));return e<0&&(e=2*Math.PI+e),e}function mod360(a){var t=360*(a/360-_abs(a/360));return t<0&&(t+=360),t}function calc_moon_acending_node(a){var t,e,i,s=new Date;return t=a?(calc_julian_date(s.getHours(),s.getMinutes(),tz,a)-2415020.5)/36525:(calc_julian_date(time.getHours(),time.getMinutes(),tz,a)-2415020.5)/36525,e=calc_ayanamsa(a),i=mod2pi((259.183275-1800*t-134.142008*t+.002078*t*t)*RADS)*DEGS,i-e}function calc_ayanamsa(a){var t,e,i,s,n=new Date;a?(e=n.getFullYear(),i=n.getMonth()+1,s=n.getDate()):(e=date.getFullYear(),i=date.getMonth()+1,s=date.getDate()),t=e<100?10:1e3;var r=1*e/t,o=16.90709*r-6.92416-.757371*r*r,h=1.1574074*(i+s/30)/t;return o+h}function calc_ascendant(a,t,e){var i=calc_sideral_time(a,t,e),s=_ecl(calc_julian_date(a,t,tz,e)),n=Math.atan2(Math.cos(i*RADS),-Math.sin(i*RADS)*Math.cos(s*RADS)-Math.tan(lat*RADS)*Math.sin(s*RADS));return n*DEGS}function calc_tithi(a){var t=["1/K.Pratipada/Pin.","2/K.Dvitiya/Pin.","3/K.Tritiya/Pin.","4/K.Chaturthi/Ida","5/K.Panchami/Ida","6/K.Shashthi/Ida","7/K.Saptami/Pin.","8/K.Ashtami/Pin.","9/K.Navami/Pin.","10/K.Dasami/Ida","11/K.Ekadasi/Ida","12/K.Dwadasi/Ida","13/K.Trayodasi/Pin.","14/K.Chaturd./Pin.","15/K.Amavasya/Pin.","1/S.Pratipada/Ida","2/S.Dvitiya/Ida","3/S.Tritiya/Ida","4/S.Chaturthi/Pin.","5/S.Panchami/Pin.","6/S.Shashthi/Pin.","7/S.Saptami/Ida","8/S.Ashtami/Ida","9/S.Navami/Ida","10/S.Dasami/Pin.","11/S.Ekadasi/Pin.","12/S.Dwadasi/Pin.","13/S.Trayodasi/Ida","14/S.Chaturd./Pin.","15/S.Purnima/Ida"],e=calc_ayanamsa(a),i=new Date;if(a)s=calc_julian_date(i.getHours(),i.getMinutes(),tz,a);else var s=calc_julian_date(time.getHours(),time.getMinutes(),tz,a);var n=(calc_moon_positionIII(a)-e-(calc_vsop87(1,s)-e))/12;return n>15?n-=15:n<15&&n>0?n+=15:n>30?n-=30:n<0&&(n=Math.round(Math.abs(2*n))),t[Math.round(Math.abs(Math.floor(n)))]}function calc_day_lord(a){var t,e=calc_julian_date(time.getHours(),time.getMinutes(),0,a),i=(Math.floor(e+.5)+1)%7;switch(i){case 0:t="Sun";break;case 1:t="Moon";break;case 2:t="Mars";break;case 3:t="Mercury";break;case 4:t="Jupiter";break;case 5:t="Venus";break;case 6:t="Shani";break;default:t="NaN"}return t}function calc_hora_lord(a){var t,e,i=["Sun","Venus","Mercury","Moon","Shani","Jupiter","Mars"],s=[],n=[],r=new Date;e=a?r.getHours()+r.getMinutes()/60:time.getHours()+time.getMinutes()/60;var o=calc_day_lord(a),h=i.indexOf(o),l=calc_sunriseset(!0,!1,!1,a),c=calc_sunriseset(!1,!1,!1,a),d=calc_sunriseset(!0,!0,!1,a),m=(c-l)/12,u=(24-c+d)/12;s[0]=l;for(var M=1;M<12;M++)s[M]=s[M-1]+m;s[12]=c;for(M=13;M<25;M++)s[M]=s[M-1]+u;n[0]=i[h];for(M=1;M<25;M++)h>5&&(h=-1),n[M]=i[h+1],h++;for(M=0;M<24;M++)e<d&&(e+=24),e>=s[M]&&e<=s[M+1]&&(t=n[M]);return t}function calc_sunriseset(a,t,e,i){var s,n,r,o,h=90+50/60,l=h,c=new Date;i?(s=c.getFullYear(),n=c.getMonth()+1,r=c.getDate(),o=-c.getTimezoneOffset()/60):(s=date.getFullYear(),n=date.getMonth()+1,r=date.getDate(),o=tz);var d=Math.floor(275*n/9),m=Math.floor((n+9)/12),u=1+Math.floor((s-4*Math.floor(s/4)+2)/3),M=t?d-u*m+(r+1)-30:d-u*m+r-30,f=lon/15;if(a)var g=M+(6-f)/24;else g=M+(18-f)/24;var S=.9856*g-3.289,p=mod360(S+1.916*Math.sin(S*RADS)+.02*Math.sin(2*S*RADS)+282.634),_=mod360(Math.atan(.91764*Math.tan(p*RADS))*DEGS),y=90*Math.floor(p/90),v=90*Math.floor(_/90);_=(_+(y-v))/15;var D=.39782*Math.sin(p*RADS),A=Math.cos(Math.asin(D)*DEGS*RADS),R=(Math.cos(l*RADS)-D*Math.sin(lat*RADS))/(A*Math.cos(lat*RADS));if(R>1)return"00:00:00";if(R<-1)return"00:00:00";var w=a?(360-Math.acos(R)*DEGS)/15:Math.acos(R)*DEGS/15,z=w+_-.06571*g-6.622,x=mod24(z-f)+1*o;x<0&&(x+=24),x%=24;var T,b,k,I=parseInt(x),E=0,L=navigator.userAgent.toLowerCase();if(L.indexOf("firefox")>-1||L.indexOf("chrome")>-1||L.indexOf("msie")>-1){if(a)try{for(E=0;E<63;E++)if(T=calc_julian_date(I,E,tz,i),k=o!=tz?Math.floor(calc_ascendant(I-1,E,i)):Math.floor(calc_ascendant(I,E,i)),b=Math.floor(calc_vsop87(1,T)),k<0&&(k+=360),k>360&&(k-=360),b<0&&(b+=360),b>360&&(b-=360),b==k){E++;break}}catch(a){return e?dec2hms(x):x}if(!a)try{for(E=0;E<63;E++)if(T=calc_julian_date(I,E,tz,i),k=o!=tz?Math.floor(calc_ascendant(I-1,E,i)):Math.floor(calc_ascendant(I,E,i)),b=Math.floor(calc_vsop87(1,T))+180,k<0&&(k+=360),k>360&&(k-=360),b<0&&(b+=360),b>360&&(b-=360),b==k){E++;break}}catch(a){return e?dec2hms(x):x}return e?dec2hms(I+E/60):I+E/60}return e?dec2hms(x):x}function calc_all_vimsottari_dasa(){var a=["Me","Ke","Ve","Su","Mo","Ma","Ra","Ju","Sa"],t=[6209.11643142495,2556.69500117498,7304.84286049994,2191.45285814998,3652.42143024997,2556.69500117498,6574.35857444995,5843.87428839995,6939.60071747494],e=[17,7,20,6,10,7,18,16,19];const i={Me:["Me","Ke","Ve","Su","Mo","Ma","Ra","Ju","Sa"],Ke:["Ke","Ve","Su","Mo","Ma","Ra","Ju","Sa","Me"],Ve:["Ve","Su","Mo","Ma","Ra","Ju","Sa","Me","Ke"],Su:["Su","Mo","Ma","Ra","Ju","Sa","Me","Ke","Ve"],Mo:["Mo","Ma","Ra","Ju","Sa","Me","Ke","Ve","Su"],Ma:["Ma","Ra","Ju","Sa","Me","Ke","Ve","Su","Mo"],Ra:["Ra","Ju","Sa","Me","Ke","Ve","Su","Mo","Ma"],Ju:["Ju","Sa","Me","Ke","Ve","Su","Mo","Ma","Ra"],Sa:["Sa","Me","Ke","Ve","Su","Mo","Ma","Ra","Ju"]},s={Me:[17,7,20,6,10,7,18,16,19],Ke:[7,20,6,10,7,18,16,19,17],Ve:[20,6,10,7,18,16,19,17,7],Su:[6,10,7,18,16,19,17,7,20],Mo:[10,7,18,16,19,17,7,20,6],Ma:[7,18,16,19,17,7,20,6,10],Ra:[18,16,19,17,7,20,6,10,7],Ju:[16,19,17,7,20,6,10,7,18],Sa:[19,17,7,20,6,10,7,18,16]};var n=calc_julian_date(time.getHours(),time.getMinutes(),0,!1),r=(n-2415020)/36525,o=(date.getFullYear(),365.2421896698-6.15359*1e-5*r-7.29e-9*r*r+2.64*1e-9*r*r*r),h=calc_ayanamsa(!1),l=mod360(calc_moon_positionIII(!1)-h),c=calc_nakshatra(mygrahas[2].getra(),4),d=calc_nakshatra(mygrahas[2].getra(),2),m=a.indexOf(d),u=t[a.indexOf(d)];Date.prototype.addMinutes=function(a){return this.setMinutes(this.getMinutes()+a),this};var M=(l-c)/13.3333,f=Math.abs(M*(u/o)),g=new Date,S=m,p=(g.getFullYear(),g.getMonth(),g.getDate(),date.getFullYear(),date.getMonth(),date.getDate(),new Date(dec2date(f))),_=[];_.push(d+": "+p.toISOString().split("T")[0]+"\t"+i[d].join("-"));for(var y=0,v=0,D=0,A=p,R=0;R<9;R++){var w=7;D=s[d][R],y=w*D/120,v=365*y*24*60,p.addMinutes(v);A=new Date(p)}for(R=0;R<9;R++){S>8&&(S=0);var z=p.getFullYear(),x=p.getMonth(),T=p.getDate();A=new Date(z+e[S],x,T);p=A,S++,_.push(a[S>8?0:S]+": "+A.toISOString().split("T")[0]+"\t"+i[a[S>8?0:S]].join("-"))}return _}function calc_vimsottari_dasa(a){
for(var t,e,i,s,n,r,o=["Me","Ke","Ve","Su","Mo","Ma","Ra","Ju","Sa"],h=[6209.11643142495,2556.69500117498,7304.84286049994,2191.45285814998,3652.42143024997,2556.69500117498,6574.35857444995,5843.87428839995,6939.60071747494],l=calc_julian_date(time.getHours(),time.getMinutes(),0,!1),c=(l-2415020)/36525,d=(date.getFullYear(),365.2421896698-6.15359*1e-5*c-7.29e-9*c*c+2.64*1e-9*c*c*c),m=calc_ayanamsa(!1),u=mod360(calc_moon_positionIII(!1)-m),M=calc_nakshatra(mygrahas[2].getra(),4),f=calc_nakshatra(mygrahas[2].getra(),2),g=o.indexOf(f),S=h[o.indexOf(f)],p=(u-M)/13.3333,_=1-p,y=Math.abs(p*(S/d)),v=0,D=0,A=f,R=new Date,w=g,z=R.getFullYear()*d+30*(R.getMonth()+1)+R.getDate(),x=date.getFullYear()*d+30*(date.getMonth()+1)+date.getDate(),T=0;T<9;T++){if(g>8&&(g=0),v+=h[g]/d/120,v>p){t=o[g];break}g++}v=1-(v-p)/(h[g]/d/120);for(T=0;T<9;T++){if(g>8&&(g=0),D+=h[g]/d/120,D>v){e=o[g];break}g++}var b=_*h[w];r=z-(x+b),w++,v=0;for(T=0;T<9;T++){if(w>8&&(w=0),v+=h[w],v>r){i=o[w];break}w++}r=1-(v-r)/h[w],v=0;for(T=0;T<9;T++){if(w>8&&(w=0),v+=h[w]/d/120,v>r){s=o[w];break}w++}D=0,v=1-(v-r)/(h[w]/d/120);for(T=0;T<9;T++){if(w>8&&(w=0),D+=h[w]/d/120,D>v){n=o[w];break}w++}var k=dec2date(y),I=" ";I+=(R.getDate()<10?"0":"")+R.getDate(),I+=(R.getMonth()+1<10?"/0":"/")+(R.getMonth()+1),I+=(R.getFullYear()<1e3?"/0":"/")+R.getFullYear();var E="";return E+=A,E+="/",E+=t,E+="/",E+=e,E+="     ",E+=i,E+="/",E+=s,E+="/",E+=n,a?k+" "+I:E}function onmousedown(a){var t,e,i="D",s=document.getElementById("canvas_chart"),n=s.getContext("2d");a.preventDefault(),a.layerX||0==a.layerX?(t=a.layerX,e=a.layerY):(a.offsetX||0==a.offsetX)&&(t=a.offsetX,e=a.offsetY),t>277&&t<309&&e>610&&e<623?(calc_position(!1),draw(!1)):t>313&&t<350&&e>610&&e<623?(calc_position(!0),draw(!0)):t>600&&t<621&&e>610&&e<623?(forward<=0&&(forward=2),n.clearRect(300,0,300,200),draw_empty_chart(n,s,330,0),draw_division_chart(n,division[forward-2],division[forward-1],i+index[forward-1]),forward-=2):t>624&&t<645&&e>610&&e<623&&(forward>=10&&(forward=8),n.clearRect(300,0,300,200),draw_empty_chart(n,s,330,0),draw_division_chart(n,division[forward],division[forward+1],i+index[forward]),forward+=2)}function onkeydown(a){27==a.keyCode?alert("esc"):38==a.keyCode?alert("up"):40==a.keyCode?alert("down"):187==a.keyCode?alert("+"):189==a.keyCode&&alert("-")}async function draw(a){var t=document.getElementById("canvas_info"),e=document.getElementById("dasha_table"),i=e.getContext("2d"),s=t.getContext("2d");t.onselectstart=function(){return!1};var n=document.getElementById("canvas_chart"),r=n.getContext("2d");return r.clearRect(0,0,n.width,n.height),n.onselectstart=function(){return!1},draw_empty_chart(r,n,0,0),draw_zodiacs(r),draw_houses(r),draw_empty_chart(r,n,330,0),draw_division_chart(r,mynavamsaz,mynavamsah,""),draw_info(s,t,a),draw_dasha(i,e),!0}function draw_zodiacs(a){a.font="7pt Montserrat",a.textAlign="center",a.fillStyle="rgba(238, 238, 238,1)";var t=[125,93,62,43,50,54,111,104,50,154,62,165,125,117,188,165,200,154,139,104,200,54,188,43];a.fillText(myrashis[0],t[0],t[1]),a.fillText(myrashis[1],t[2],t[3]),a.fillText(myrashis[2],t[4],t[5]),a.fillText(myrashis[3],t[6],t[7]),a.fillText(myrashis[4],t[8],t[9]),a.fillText(myrashis[5],t[10],t[11]),a.fillText(myrashis[6],t[12],t[13]),a.fillText(myrashis[7],t[14],t[15]),a.fillText(myrashis[8],t[16],t[17]),a.fillText(myrashis[9],t[18],t[19]),a.fillText(myrashis[9],t[18],t[19]),a.fillText(myrashis[10],t[20],t[21]),a.fillText(myrashis[11],t[22],t[23])}function draw_houses(a){a.font="8pt Montserrat",a.textAlign="center",a.fillStyle="rgba(0, 255, 183,1)";var t=[125,53,62,13,26,54,62,104,26,154,62,195,125,154,188,195,224,154,189,104,224,54,188,13];a.fillText(mybhavas[1],t[0],t[1]),a.fillText(mybhavas[2],t[2],t[3]),a.fillText(mybhavas[3],t[4],t[5]),a.fillText(mybhavas[4],t[6],t[7]),a.fillText(mybhavas[5],t[8],t[9]),a.fillText(mybhavas[6],t[10],t[11]),a.fillText(mybhavas[7],t[12],t[13]),a.fillText(mybhavas[8],t[14],t[15]),a.fillText(mybhavas[9],t[16],t[17]),a.fillText(mybhavas[10],t[18],t[19]),a.fillText(mybhavas[11],t[20],t[21]),a.fillText(mybhavas[12],t[22],t[23])}function draw_info(a,t,e){a.font="8pt Montserrat",a.textAlign="left",a.fillStyle="rgba(238, 238, 238,1)";var i=new Date;a.clearRect(0,0,t.width,t.height),t.addEventListener("keydown",onkeydown,!0),t.addEventListener("mousedown",onmousedown,!1),t.addEventListener("mouseup",function(a){}),t.addEventListener("mousewheel",function(a){}),t.addEventListener("mousemove",function(a){}),t.addEventListener("contextmenu",function(a){a.preventDefault()}),t.addEventListener("touchstart",function(a){a.preventDefault()}),t.addEventListener("touchmove",function(a){a.preventDefault()}),t.addEventListener("touchend",function(a){a.preventDefault()});for(var s=10,n=0;n<=9;n++)a.fillText(mygrahas[n].name,2,s),s+=15;a.textAlign="end",s=10;for(n=0;n<=9;n++)a.fillText(Math.floor(mygrahas[n].getdegree())+"°",52,s),s+=15;a.textAlign="start",s=10;for(n=0;n<=9;n++)a.fillText(mygrahas[n].getzodiac(),57,s),s+=15;a.textAlign="end",s=10;for(n=0;n<=9;n++)a.fillText(mygrahas[n].ra.toFixed(3)+"°",170,s),s+=15;s=10;for(n=0;n<=9;n++)a.fillText(mygrahas[n].retro,26.5,s),s+=15;a.textAlign="left",s=10;for(n=0;n<=9;n++)a.fillText(mynaksha[n],245,s),s+=15;a.textAlign="left",s=10;for(n=0;n<=9;n++)a.fillText(mynakshap[n],305,s),s+=15;a.textAlign="left",s=10;for(n=0;n<=9;n++)a.fillText(mynakshal[n],315,s),s+=15;a.textAlign="left",a.fillText("Ayanamsa:"+calc_ayanamsa(e).toFixed(4)+"°",2,170),e?a.fillText("Sid. time:   "+deg2hms(calc_sideral_time(i.getHours(),i.getMinutes(),e)),2,185):a.fillText("Sid. time:   "+deg2hms(calc_sideral_time(time.getHours(),time.getMinutes(),e)),2,185),a.fillText("Sunrise:"+calc_sunriseset(!0,!1,!0,e),120,170),a.fillText("Sunset: "+calc_sunriseset(!1,!1,!0,e),120,185),a.fillText("Day   Lord:"+calc_day_lord(e),223,170),a.fillText("Hora Lord:"+calc_hora_lord(e),223,185),a.fillText("Tithi:"+calc_tithi(e),330,185),a.fillText("Weekday:"+calc_day_of_the_week(e),330,170),e||(a.fillText("Dasa:"+calc_vimsottari_dasa(!1),461,170),a.fillText("Time:"+calc_vimsottari_dasa(!0),461,185))}function draw_dasha(a,t){a.font="10pt Montserrat",a.textAlign="left",a.fillStyle="rgba(238, 238, 238,1)";new Date;a.clearRect(0,0,t.width,t.height),t.addEventListener("keydown",onkeydown,!0),t.addEventListener("mousedown",onmousedown,!1),t.addEventListener("mouseup",function(a){}),t.addEventListener("mousewheel",function(a){}),t.addEventListener("mousemove",function(a){}),t.addEventListener("contextmenu",function(a){a.preventDefault()}),t.addEventListener("touchstart",function(a){a.preventDefault()}),t.addEventListener("touchmove",function(a){a.preventDefault()}),t.addEventListener("touchend",function(a){a.preventDefault()});var e,i=calc_all_vimsottari_dasa();for(e=0;e<i.length;e++)text=i[e],a.fillText(text,2,20*e+20)}function draw_empty_chart(a,t,e,i){a.lineWidth=.4,a.strokeStyle="rgba(238, 238, 238,1)",a.shadowColor="rgba(0,0,0,1)",a.shadowBlur=1,t.addEventListener("contextmenu",function(a){a.preventDefault()}),t.addEventListener("mousedown",onmousedown,!1);var s=e,n=i;a.beginPath(),a.moveTo(s,n),a.lineTo(s+250,n),a.lineTo(s+250,n+200),a.lineTo(s,n+200),a.lineTo(s,n),a.lineJoin="round",a.stroke(),a.beginPath(),a.moveTo(s,n+100),a.lineTo(s+125,n),a.lineTo(s+250,n+100),a.lineTo(s+125,n+200),a.lineTo(s,n+100),a.lineJoin="round",a.stroke(),a.beginPath(),a.moveTo(s,n),a.lineTo(s+250,n+200),a.stroke(),a.beginPath(),a.moveTo(s,n+200),a.lineTo(s+250,n),a.stroke()}function draw_division_chart(a,t,e,i){a.font="7pt Montserrat",a.textAlign="center";var s=330,n=[125,93,62,43,50,54,111,104,50,154,62,165,125,117,188,165,200,154,139,104,200,54,188,43];a.fillStyle="rgba(238, 238, 238,1)",a.fillText(t[0],n[0]+s,n[1]),a.fillText(t[1],n[2]+s,n[3]),a.fillText(t[2],n[4]+s,n[5]),a.fillText(t[3],n[6]+s,n[7]),a.fillText(t[4],n[8]+s,n[9]),a.fillText(t[5],n[10]+s,n[11]),a.fillText(t[6],n[12]+s,n[13]),a.fillText(t[7],n[14]+s,n[15]),a.fillText(t[8],n[16]+s,n[17]),a.fillText(t[9],n[18]+s,n[19]),a.fillText(t[9],n[18]+s,n[19]),a.fillText(t[10],n[20]+s,n[21]),a.fillText(t[11],n[22]+s,n[23]),a.font="8pt Montserrat",a.textAlign="center";n=[125,53,62,13,26,54,62,104,26,154,62,195,125,154,188,195,224,154,189,104,224,54,188,13];a.fillStyle="rgba(255, 0, 93,1)",a.fillText(e[1].replace(/As/g,""),n[0]+s,n[1]),a.fillText(e[2].replace(/As/g,""),n[2]+s,n[3]),a.fillText(e[3].replace(/As/g,""),n[4]+s,n[5]),a.fillText(e[4].replace(/As/g,""),n[6]+s,n[7]),a.fillText(e[5].replace(/As/g,""),n[8]+s,n[9]),a.fillText(e[6].replace(/As/g,""),n[10]+s,n[11]),a.fillText(e[7].replace(/As/g,""),n[12]+s,n[13]),a.fillText(e[8].replace(/As/g,""),n[14]+s,n[15]),a.fillText(e[9].replace(/As/g,""),n[16]+s,n[17]),a.fillText(e[10].replace(/As/g,""),n[18]+s,n[19]),a.fillText(e[11].replace(/As/g,""),n[20]+s,n[21]),a.fillText(e[12].replace(/As/g,""),n[22]+s,n[23]),a.textAlign="left",a.fillStyle="rgba(238, 238, 238,1)",a.fillText("Rashi Chart",2,215),a.fillText(i,n[0]+s,105),a.textAlign="left",a.fillStyle="rgba(238, 238, 238,1)",a.fillText("D9 - Navamsa",s,215)}window.onload=generate,document.querySelector(".trigger").addEventListener("click",()=>{document.querySelector(".input").classList.contains("open")?document.querySelector(".input").classList.remove("open"):document.querySelector(".input").classList.add("open"),document.querySelector("body").classList.contains("lock")?document.querySelector("body").classList.remove("lock"):document.querySelector("body").classList.add("lock")});var name,date,time,tz,lat,lon,latdir,londir,lattmp,lontmp,dn,marker,forward=0;lat=Number(document.getElementById("lat").value),lon=Number(document.getElementById("lon").value);var mapEle=L.map("mapEle").setView([lat,lon],8);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"© OpenStreetMap"}).addTo(mapEle),mapEle.on("click",function(a){let t=a.latlng.lat.toFixed(6),e=a.latlng.lng.toFixed(6);document.getElementById("lat").value=t,document.getElementById("lon").value=e,marker&&mapEle.removeLayer(marker),marker=new L.Marker(a.latlng,{draggable:!0}),mapEle.addLayer(marker),marker.bindPopup("<b>My birthplace</b>").openPopup()});var DEGS=180/Math.PI,RADS=Math.PI/180,EPS=1e-12,planets=[],mygrahas=[],mybhavas=[],myrashis=[],myhoraz=[],myhorah=[],mysashthamshaz=[],mysashthamshah=[],myashthamsaz=[],myashthamsah=[],mynavamsaz=[],mynavamsah=[],mydwadashamsaz=[],mydwadashamsah=[],mynaksha=[],mynakshal=[],mynakshap=[],index=[2,2,6,6,8,8,9,9,12,12],division=[myhoraz,myhorah,mysashthamshaz,mysashthamshah,myashthamsaz,myashthamsah,mynavamsaz,mynavamsah,mydwadashamsaz,mydwadashamsah],AS=0,SU=1,MO=2,MA=3,ME=4,JU=5,VE=6,SA=7,RA=8,KE=9,Aries=1,Taurus=2,Gemini=3,Cancer=4,Leo=5,Virgo=6,Libra=7,Scorpio=8,Sagittarius=9,Capricorn=10,Aquarius=11,Pisces=12,MAXZOD=12,H1=1,H2=2,H3=3,H4=4,H5=5,H6=6,H7=7,H8=8,H9=9,H10=10,H11=11,H12=12,MAXH=12,Ashvini=1,Bharani=2,Krittika=3,Rohini=4,Mrigashira=5,Ardra=6,Punarvasu=7,Pushya=8,Ashlesha=9,Magha=10,PurvaPhalguni=11,UttaraPhalguni=12,Hasta=13,Chitra=14,Svati=15,Vishakha=16,Anuradha=17,Jyeshtha=18,Mula=19,PurvaShadha=20,UttaraShadha=21,Sravana=22,Dhanista=23,Shatabhisha=24,PurvaBhadra=25,UttaraBhadra=26,Revati=27,MAXNAKSHA=27;